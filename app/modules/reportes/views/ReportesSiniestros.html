<spinner name="spinnerUserList" ng-cloak="">
    <div class="overlay"></div>
    <div class="spinner">
        <div class="test"><i class="fa fa-refresh fa-spin fa-5x"></i></div>
    </div>
    <div class="please-wait">Please Wait...</div>
</spinner>

<div class="skin-blue sidebar-mini">
    <div class="wrapper" ng-controller="ReporteSiniestroInfoCtrl">

        <div ui-view="header"></div>

        <div ui-view="menu"></div>

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">

            <div growl></div>

            <!-- Content Header (Page header) -->
            <section class="content-header">
                <h1>Reporte de Siniestro</h1>
                <ol class="breadcrumb">
                    <li><a ui-sref="home"><i class="fa fa-dashboard"></i>Home</a></li>
                </ol>
            </section>

            <!-- Main content -->
            <section class="content" style="min-height:500px;">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="content" style="min-height:125px;">
                            <div class="box box-primary">
                                <div class="box-header bg-gray-light">
                                    <h3 class="box-title">Filtros</h3>
                                </div><!-- /.box-header -->

                                <div class="box-body">
                                    <div class="col-sm-2">
                                        <label>*Fecha Inicio</label>

                                        <div class="input-group">
                                                        <span class="input-group-btn">
                                                            <button type="button" class="btn btn-default"
                                                                    ng-click="open_start_date()"><i
                                                                    class="glyphicon glyphicon-calendar"></i></button>
                                                        </span>
                                            <input type="text" class="form-control"
                                                   uib-datepicker-popup="{{format}}"
                                                   is-open="popup_start_date.opened"
                                                   datepicker-options="dateOptions"
                                                   ng-required="true" close-text="Close"
                                                   alt-input-formats="altInputFormats"
                                                   ng-model="report.start_date"/>
                                        </div>
                                    </div>
                                    <div class="col-sm-2">
                                        <label>*Fecha Fin</label>

                                        <div class="input-group">
                                                        <span class="input-group-btn">
                                                            <button type="button" class="btn btn-default"
                                                                    ng-click="open_end_date()"><i
                                                                    class="glyphicon glyphicon-calendar"></i></button>
                                                        </span>
                                            <input type="text" class="form-control"
                                                   uib-datepicker-popup="{{format}}"
                                                   is-open="popup_end_date.opened"
                                                   datepicker-options="dateOptions"
                                                   ng-required="true" close-text="Close"
                                                   alt-input-formats="altInputFormats"
                                                   ng-model="report.end_date"/>
                                        </div>
                                    </div>

                                    <div class="col-sm-4">
                                        <label>Documento CI / Placa</label>
                                        <input type="text" class="form-control" placeholder="Ingresar CI/Placa"
                                               ng-model="report.ci_or_placa"/>
                                    </div>

                                    <div class="col-sm-4">
                                        <label>Tipo Busqueda</label>
                                        <select class="form-control" ng-model="buscarType" ng-options="option.name for option in listSearch track by option.id">
                                            <option value="">Seleccione Busqueda</option>
                                        </select>
                                    </div>

                                    <div class="col-sm-3">
                                        <br>
                                        <label>Ramo</label>
                                       <select id="selectRamos" class="form-control" ng-model="report.ramo_id">
                                           <option value="">Seleccione Ramo</option>
                                           <option value="P">Personas</option>
                                           <option value="A">Auto</option>
                                       </select>

                                    </div>

                                    <div class="col-sm-4">
                                        <br>
                                        <label>Aseguradora</label>
                                        <div angucomplete-alt id="ex21"
                                             placeholder="Seleccione Aseguradora"
                                             pause="200"
                                             selected-object="selectAseguradora"
                                             remote-api-handler="searchTheAseguradoraInTheSystem"
                                             title-field="aseguradora_nombre"
                                             minlength="3"
                                             description-field=""
                                             input-class="form-control form-control-small"
                                             match-class="highlight">
                                        </div>
                                    </div>

                                    <div class="col-sm-2">
                                        <br>
                                        <div class="input-group">
                                            <label>&nbsp;</label>
                                            <button class="btn btn-block btn-primary btn-md"
                                                    ng-click="searchSiniestralidadInfo()">Buscar
                                            </button>
                                        </div>

                                    </div>
                                </div><!-- /.box-body -->

                            </div><!-- /.box -->
                        </div>
                    </div>
                </div><!-- /.row -->

                <!--Devices info--->
                <div class="row" ng-show="showTableSiniestros">
                    <div class="col-lg-12">
                        <div class="content" style="min-height:135px;">
                            <div class="box box-primary">
                                <div class="box-header bg-gray-light">
                                    <h3 class="box-title">Siniestros</h3>
                                </div><!-- /.box-header -->
                                <div class="box-body">

                                    <table id="reportGeneralDeviceInfo" class="table table-bordered table-striped text-center font-table">
                                        <thead>
                                        <tr>
                                            <th>Numero de Poliza</th>
                                            <th>Numero de Siniestro</th>
                                            <th>Cliente</th>
                                            <th>CI</th>
                                            <th>Placa</th>
                                            <th>Ramo</th>
                                            <th>Vigencia</th>
                                            <th>Agente</th>
                                            <th>Aseguradora</th>
                                            <th>Prima</th>
                                            <th>SA</th>
                                            <th>Monto Siniestro</th>
                                            <th>Siniestralidad</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat = "row in listSiniestros">

                                           <td>{{row.numero_poliza}}</td>
                                            <td>{{row.numero_siniestro}}</td>
                                            <td>{{row.cliente}}</td>
                                            <td>{{row.documentoId}}</td>
                                            <td>{{row.placa}}</td>
                                            <td>{{row.ramo}}</td>
                                            <td>{{row.fecha_vigencia | date}}</td>
                                            <td>{{row.agente}}</td>
                                            <td>{{row.aseguradora}}</td>
                                            <td>{{row.prima | separador_punto}}</td>
                                            <td>{{row.sa | separador_punto}}</td>
                                            <td>{{row.monto_siniestro | separador_punto}}</td>
                                            <td>{{row.calculo | format_porcent}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div ng-show="totalRecords == 0">
                    <h3>No se encontro ningun registro.</h3>
                </div>
                <div ng-show="totalPages > 1" class="align-center">
                    <uib-pagination total-items="totalRecords" ng-model="filterCriteria.JcrParameters.Reports.page" items-per-page="filterCriteria.JcrParameters.Reports.limit" previous-text="previous" next-text="next" last-text="last"
                                    direction-links="true" rotate="false" max-size="5"  boundary-link-numbers="true" ng-change="selectPage()"></uib-pagination>
                </div>

                <div class="row" ng-show="showTableSiniestros">
                    <div class="content" style="min-height: 0px;">
                        <div class="col-md-4"></div>
                        <div class="col-md-4">
                            <button class="btn btn-block btn-primary btn-sm"
                                    ng-click="exportPdfReport()">Exportar Reporte
                            </button>
                        </div>
                        <div class="col-md-4"></div>
                    </div>
                </div>

            </section><!-- /.content -->


        </div>

        <!--footer-->
        <div ui-view="footer"></div>

    </div><!-- ./wrapper -->
</div>
